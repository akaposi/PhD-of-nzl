\chapter{Introduction}

The aim of this work is to find out the approach to implement quotient
types in intensional \mltt. Type theory serves as both a foundation of
mathematics and a programming language. In set theory quotient set is
a set of the equivalence classes of some equivalence relation on
another set. The word \emph{Quotient} is usually used to capture
similar notions in other abstract branches, such as quotient group,
quotient space, quotient category etc. Move to type theory, it is
expected to have \emph{Quotient types} to construct similar objects in
mathematics. However in current setting of \itt, it is not
available. Motivated by this fact, I start to extend type theory with
quotient types. This thesis \todo{fill in the missing part}







Theories of dependent types have been proposed as a foundation of constructive mathematic and as a framework in which to construct certified programs and to extract programs from proofs. Using implementations of such type theories, substantial pieces of constructive mathematics have been formalised and medium scale program developments and verifications have been carried out.

Type theory is usually considered as an more rigorous foundation of
constructive mathematics that set theory. Per Martin-L\"{o}f's developed several
versions of type theory which we usually call them Martin-Löf's
intuitionistic type theory (or in short Martin-Löf's type theory). A number of
dependently typed functional programmming languages are developed upon
one of his type theories, including NuPRL, LEGO, Coq, Agda, Epigram, Pi-Sigma etc.
The Curry-Howard correspondence (propositions corresponds to types and
proofs corresponds to terms), and the notion of dependent types from
\mltt make it possible to do computer-based reasoning within these
languages.

However there are many important extensional concepts missing in the
intensional variants of \mltt. The equality in mathematics is
subdivided into several different notions in type theory and many
problems arose.
\emph{Quotient types} is one of these extensional
concepts which does not exist in \itt like Agda. 

The main subject of this thesis is to study the approaches to encode
quotients and to implement quotient types in type theory.

\section{Background}

\subsection{Equality and extensional concepts}

We first learn equality for numbers in mathematics. It generally
expressed the sameness of two mathematical objects such as numbers or sets.
$1+2=3$ tells us the mathematical object calculated from $1+2$ is the
same as $3$.

From ages before, mathematicians are arguing about the correct way to
characterise equality. The most common idea is that equality is just
identity. Leibniz's law can be seen as a "definition" of
equality:

Given any $x$ and $y$, $x = y$ if, given any predicate $P$, $P(x)$ if and only
if $P(y)$.

In type theory, equality also plays a very important role.
It is not difficult to imagine that the subject of equality is also
contentious in type theory. Considering a variety of issues, there are
several notions of equality in type theory.
We can compare whether two types are equal or two terms are equal. If two
expressions can be computed to the same object then we claim they are
 \emph{definitionally} equal.  In addition we can define types to
 internalise these propositions. A term of this type is just a witness or evidence of
 this equality. We usually call these types identity types or
 propositional equalities.

The problem also arises from the computational difficulties. We
usually equate functions which gives the same outputs if we feed in the
same inputs. However this equality is extensional because the intension
of functions are definitions which can be different. In \itt, which is
more widely used, the encoding of this extensional equality of
functions is also a problem. A type checker can easily decide whether two
values of inductive types are the same, but not whether two functions
are extensionally equal. Even suppose we encode the method to compute
the definitional equality of the outputs for each given input, it can
only decide the equality for finite types. Because there is no
attached equality for each types other than trivial identity, it is
necessary to use a different model of type theory in which types are
equipped with equalities.

\subsection{Quotient types}


In mathematics, a quotient set is a set of the equivalence classes of
some equivalence relation on another set. Abstracted from this
concept, there are also quotient groups, quotient categories etc.

Naturally, given a type and an equivalence relation, quotient types
are interesting to study. Due to the difference of type theory and set
theory, quotient types can not be constructed via equivalence classes
(or we need some other axioms as we will discussed in detail
later).

Quotient types are very useful in three aspects. 
When the quotients
can be defined without the help of quotient types, it provides us
framework to define functions and properties on the base types and
lift them if they respects the equivalence relation. This sounds
superfluous at first, but in practise, it is much easier to define
functions for the base types (because usually they have a bundle of
library codes) on underlying level, and the ''quotient types'' has no
redundant on the surface level.
Quotient types can also enable us define some types which are not
definable in standard \itt, for example real numbers, multisets etc.
Usually the examples we want to implement by quotient types are cases
of quotient sets in mathematics. However, there are not only sets
(whose equality is propositional), but also other types with higher
level of structures. It is an interesting topic in \hott and quotient
types are extended to cover types which are more than $h-sets$.

The topic of quotient types started very early and there are already
several models of type theory to encode extensional concepts including
quotient types.

\subsection{different models}

If each type comes with its own equality, it looks like it naturally
encodes quotient types.

\todo{short explanation of models or leave it for later discusssion.}




\subsection{Applications}

\todo{mention the definable quotient is very useful}

Quotients are very useful in general. The definable quotient structure
which can be implemented without any extension already provide some
good mechanisms. In a definable quotient structure, the ``quotient''
is defined separately as a self-cotained type and what benefits us are
the lifting functions. In some cases, for example, to use a pair of
natural number to represent an integer, it helps us prove properties
on the setoids then lift them to the ones on the ``quotient'' type. To
be more precise, it provides a bridge between the types which we know
a lot (have plenty of theorems and functions) and the new
``quotient'' types.


In a type theory with quotient type, real numbers can be encoded as
the cauchy sequences with an equivalence relation.


\section{Programming in Agda}

In this thesis we use Agda as the only programming language. Agda is a dependently typed, functional programming language, which is
based on the intensional version of \mltt. It is mainly developed by
Ulf Norell, Nils Anders Danielsson, and Andreas Abel.
It is a functional language like Haskell, but has dependent types. It has dependent pattern
matching, type checker, coverage checker and termination checker. It
supports a bundle of scheme of defing data types such as inductive, inductive-recursive, mutually inductive,
coinductive types. Its syntax is close to Haskell, in addition, it has
unicode support and mixfix operators. All these features including
type checker, unicode typing and interactive programming present in
its emacs interface. It is quite popular in the field of mathematical reasoning and programs
verifications. Many researchers implement their work of type theory in
Agda. It is also one of the popular languages in the community of the recently
developed field \hott and the library of \hott is under construction.
The adequate reasoning library code also helps in writing certified programs.

In chapter \ref{bg} we present a brief introduction to it for someone
who meet this language for the first time. In chapter 3 we use Agda to
show...\todo{Write where we use Agda and how}

Agda wiki\cite{agdawiki:main} is a good reference to it and there are
several good tutorials to Agda for example Ulf Norell's
\cite{tutorial}, Ana Bove, Peter Dybjer, and Ulf Norell's \cite{bove2009brief}.

\section{Related work}


\section{Overview}


\todo{compact, comprehensive Overview: \\Add overview of each part, as much as you can, and compact}



In \autoref{bg}, we will discuss the backgroud of this research. Type theory is a popular topic in
theoretical computer science. It is quite powerful not only a a theory
but also as a programming language. We use a dependent functional
programming language called Agda which is design based on \mltt. The
 related work will also be discussed in this chapter.


In \autoref{qt}, we will discuss quotient types which is the topic of
this thesis in detail. Quotient types
can be understood as a interpretation of quotient set in set
theory. It is an extensional concept which is also related to other extensional concepts. It can be encoded in different ways. Categorically speaking it
is a coequalizer, and a split quotient is a just a split coequalizer.


In \autoref{dq}, we start introducing one of our achievements, the
definable quotients. It is usually very unreadable, unorganised and
complicated to write some programs without abstracting. It is also
applied to quotient types. If we have some types that can be abstract
as a quotient type of some common types, then it will be easily
encoded and manipulated. As a example, integers can be encoded as the
quotients types of paired natural numbers over the equivalence
relation that two pairs are equal if they represent the same
subtraction.

In \autoref{rl}, we discuss the undefinable quotients, specially the
real numbers. Also multisets and partiality monads are mentioned as
examples of quotients which can be implemented as long as we have
quotient types. 


In \autoref{sm}, we will talk about the setoid model approach to encode
extensional concepts. The work is mainly extending the setoid model
done by Altenkirch in \cite{alti:lics99} to
quotient types.


In \autoref{HITs}, we will discuss the new area between mathematics and
computer science -- \hott. We will talk about the higher inductive
types and also the \wog-model which is used to interpret
homotopy types in \itt. Quotient types can be encoded \hott simply.